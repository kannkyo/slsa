---
layout: use-case
language: ja
---

# ユースケース

## ソフトウェアパッケージを受け入れるパッケージリポジトリ

パッケージリポジトリ(Docker Hub など)は、リポジトリにアップロードされたコンテナイメージへの悪意のある変更からユーザーを保護したいと考えています。
次の手順でこれを行うことができます。
これにより、保護されたリポジトリのユーザーを悪意のある改ざんから保護でき、すべてのユーザーが消費する各イメージに対して独自のポリシーチェックを実行する必要がなくなります。

| 件名         | 説明                                                               |
| :----------- | :----------------------------------------------------------------- |
| **ユーザー** | パッケージマネージャー                                             |
| **目標**     | 悪意のある変更からユーザーを保護する                               |
|              | ユーザーがすべての画像に対してポリシーチェックを実行する必要がない |

### どうやってするの

-   アーティファクトの発行者にリクエストすると、[in-toto SLSA来歴](https://slsa.dev/provenance)と追加のアテステーション([ソース管理アテステーション](https://github.com/in-toto/attestation/issues/47))新しい画像がリポジトリにプッシュされるたび
-   ビルダーが証明書に署名するために使用する公開鍵を公開するように発行者に要求する
-   パブリッシャーに、ビルダーとソース管理システムが満たす SLSA レベルを確認するように要求する
-   公開されたアーティファクトに適用するポリシーを決定する
    -このポリシーは、in-toto SLSA 来歴のデータに基づいて最初の使用時に作成できます。重大な逸脱(ビルダーまたはソースリポジトリの変更など)があると、プッシュエラーが発生します
    -または、パッケージリポジトリは、パブリッシャーにリポジトリの一部として特定のポリシーを構成させ、これらのポリシーをユーザーに公開して読み取り可能にできます。
-   新しいアーティファクトとその起源(およびその他の証明)を上記のポリシーと照合し、ポリシーによって評価された証明が発行者の公開鍵によって署名されていることを確認します
-   上記のチェックに失敗したアーティファクトが公開されないようにする

### 制限

このユースケースは、発行者が提供する SLSA 情報を信頼するパッケージリポジトリに依存しています。将来的には、この情報を確認する認定機関が存在する可能性があります。

コミュニティは[証明書の署名に使用される公開鍵を配布する方法](https://github.com/slsa-framework/slsa/issues/101)について議論しています。
